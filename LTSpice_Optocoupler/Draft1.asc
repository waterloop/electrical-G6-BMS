Version 4
SHEET 1 3448 724
WIRE -1632 -400 -1776 -400
WIRE -2704 -336 -2768 -336
WIRE -2544 -336 -2624 -336
WIRE -2480 -336 -2544 -336
WIRE -2304 -336 -2400 -336
WIRE -2096 -336 -2240 -336
WIRE -1776 -336 -1776 -400
WIRE -1632 -336 -1632 -400
WIRE 2768 -336 2624 -336
WIRE -2768 -304 -2768 -336
WIRE -2096 -272 -2096 -336
WIRE 2624 -272 2624 -336
WIRE 2768 -272 2768 -336
WIRE 800 -224 656 -224
WIRE 656 -160 656 -224
WIRE 800 -160 800 -224
WIRE -2544 -128 -2544 -336
WIRE 2624 -96 2624 -192
WIRE 2704 -96 2624 -96
WIRE 2832 -96 2768 -96
WIRE 3008 -96 2912 -96
WIRE 3328 -96 3008 -96
WIRE -1776 -80 -1776 -256
WIRE -1616 -80 -1776 -80
WIRE -1376 -80 -1552 -80
WIRE 3008 -16 3008 -96
WIRE 3008 -16 2928 -16
WIRE 656 16 656 -80
WIRE 736 16 656 16
WIRE 864 16 800 16
WIRE 1040 16 944 16
WIRE 1360 16 1040 16
WIRE 2624 32 2624 -96
WIRE 2752 32 2624 32
WIRE 2928 32 2928 -16
WIRE 2928 32 2832 32
WIRE 3008 32 3008 -16
WIRE -1776 48 -1776 -80
WIRE -1616 48 -1776 48
WIRE -1376 48 -1376 -80
WIRE -1376 48 -1536 48
WIRE -960 48 -1376 48
WIRE 2832 48 2832 32
WIRE 3424 48 3424 -16
WIRE 2112 112 2048 112
WIRE 2352 112 2192 112
WIRE 2624 112 2432 112
WIRE 2768 112 2624 112
WIRE 2960 112 2768 112
WIRE -48 128 -112 128
WIRE 128 128 32 128
WIRE 656 128 656 16
WIRE 656 128 320 128
WIRE 3008 128 3008 96
WIRE 1040 144 1040 16
WIRE 2048 144 2048 112
WIRE -2544 160 -2544 -48
WIRE -2288 160 -2544 160
WIRE -1776 160 -1776 48
WIRE -1776 160 -2096 160
WIRE -112 160 -112 128
WIRE 1456 160 1456 96
WIRE 2768 160 2768 112
WIRE -1376 176 -1376 48
WIRE 2624 176 2624 112
WIRE -960 192 -960 48
WIRE 3424 192 3424 112
WIRE 128 224 16 224
WIRE 384 224 320 224
WIRE 512 224 464 224
WIRE 656 224 512 224
WIRE 800 224 656 224
WIRE 992 224 800 224
WIRE 1040 240 1040 208
WIRE -2288 256 -2400 256
WIRE -2000 256 -2096 256
WIRE -1936 256 -2000 256
WIRE -1760 256 -1856 256
WIRE -1616 256 -1760 256
WIRE -1424 256 -1616 256
WIRE -1376 272 -1376 240
WIRE 800 272 800 224
WIRE 2480 272 2480 256
WIRE 2624 272 2624 256
WIRE 2624 272 2480 272
WIRE 2768 272 2768 224
WIRE 2768 272 2624 272
WIRE 3008 272 3008 128
WIRE 3008 272 2768 272
WIRE 16 288 16 224
WIRE 656 288 656 224
WIRE -1616 304 -1616 256
WIRE 512 304 512 224
WIRE 1456 304 1456 224
WIRE 2480 304 2480 272
WIRE -1760 320 -1760 256
WIRE -2000 368 -2000 256
WIRE 512 384 512 368
WIRE 656 384 656 368
WIRE 656 384 512 384
WIRE 800 384 800 336
WIRE 800 384 656 384
WIRE 1040 384 1040 240
WIRE 1040 384 800 384
WIRE -1760 416 -1760 400
WIRE -1616 416 -1616 368
WIRE -1616 416 -1760 416
WIRE -1376 416 -1376 272
WIRE -1376 416 -1616 416
WIRE -960 416 -960 256
WIRE -960 416 -1376 416
WIRE 16 416 16 368
WIRE 512 416 512 384
WIRE -2400 448 -2400 256
WIRE -1376 512 -1376 416
WIRE -2000 528 -2000 448
WIRE -2000 672 -2000 592
FLAG -112 160 0
FLAG 16 416 0
FLAG 512 416 0
FLAG 800 -160 0
FLAG 2048 144 0
FLAG 2480 304 0
FLAG 2768 -272 0
FLAG -2768 -304 0
FLAG -2400 448 0
FLAG -2000 672 0
FLAG -1632 -336 0
FLAG -2096 -272 0
FLAG -1376 512 0
SYMBOL Optos\\PC817A 224 176 R0
SYMATTR InstName U1
SYMBOL voltage 48 128 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -111 59 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 5 0 0 0 0.5m 1m)
SYMBOL voltage 656 -64 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL res 0 272 R0
SYMATTR InstName R1
SYMATTR Value 220R
SYMBOL res 640 272 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL cap 496 304 R0
SYMATTR InstName C1
SYMATTR Value 10p
SYMBOL LED 736 32 R270
WINDOW 0 72 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL res 960 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 39 62 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL nmos 992 144 R0
SYMATTR InstName M1
SYMATTR Value FDMS3622SQ2
SYMBOL TVSdiode 784 272 R0
SYMATTR InstName D2
SYMATTR Value SMBJ24CA
SYMBOL res 480 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 320R
SYMBOL zener 1472 224 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value TFZV12B
SYMBOL voltage 2208 112 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -111 59 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 5 0 0 0 1m 2m)
SYMBOL voltage 2624 -176 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 12
SYMBOL res 2608 160 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL zener 2704 -80 R270
WINDOW 0 72 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value MMBZ15VALY
SYMATTR Description Light Emitting Diode
SYMATTR Type led
SYMBOL res 2928 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 39 62 VTop 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL nmos 2960 32 R0
SYMATTR InstName M2
SYMATTR Value FDMS3622SQ2
SYMBOL TVSdiode 2752 160 R0
SYMATTR InstName D5
SYMATTR Value SMBJ24CA
SYMBOL res 2448 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 320R
SYMBOL zener 3440 112 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMATTR Value TFZV12B
SYMBOL res 2848 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL Optos\\PC817A -2192 208 R0
SYMATTR InstName U2
SYMBOL voltage -2608 -336 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -111 59 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(0 5 0 0 0 0.5m 1m)
SYMBOL voltage -1776 -240 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 12
SYMBOL res -2560 -144 R0
SYMATTR InstName R9
SYMATTR Value 300R
SYMBOL res -1776 304 R0
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL LED -2016 528 R0
SYMATTR InstName D7
SYMBOL nmos -1424 176 R0
SYMATTR InstName M3
SYMATTR Value FDMS3622SQ2
SYMBOL TVSdiode -1632 304 R0
SYMATTR InstName D8
SYMATTR Value SMBJ24CA
SYMBOL res -1984 464 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R12
SYMATTR Value 500R
SYMBOL zener -944 256 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D9
SYMATTR Value BZX84C12L
SYMBOL res -2384 -352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL LED -2304 -320 R270
WINDOW 0 72 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D10
SYMBOL res -1840 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 320R
SYMBOL zener -1552 -96 R90
WINDOW 0 -4 32 VBottom 2
WINDOW 3 36 32 VTop 2
SYMATTR InstName D11
SYMATTR Value BZX84C12L
SYMBOL res -1520 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 51 59 VTop 2
SYMATTR InstName R11
SYMATTR Value 2k
TEXT -176 440 Left 2 !;tran 5m
TEXT -2592 472 Left 2 !.tran 5m
